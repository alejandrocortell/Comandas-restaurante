(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"0f9e":function(t,a,e){"use strict";class s{constructor(t,a,e){this.id=t,this.nombre=a,this.cantidad=e}getId(){return this.id}getNombre(){return this.nombre}getCantidad(){return this.cantidad}setNombre(t){this.nombre=t}setCantidad(t){this.cantidad=t}}a["a"]=s},6921:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"q-pa-md"},[e("h3",{staticClass:"text-h3 q-my-sm"},[t._v("Cuenta")]),e("h6",{staticClass:"text-h6 q-my-sm"},[t._v("Mesa "+t._s(t.id))]),e("q-list",{attrs:{dense:""}},[e("q-item",{staticClass:"flex"},[e("q-item-section",{staticClass:"col-2 text-bold"},[t._v("Cantidad")]),e("q-item-section",{staticClass:"col-6 text-bold"},[t._v("Producto")]),e("q-item-section",{staticClass:"col items-end text-bold"},[t._v("Precio ud.")]),e("q-item-section",{staticClass:"col items-end text-bold"},[t._v("Total")])],1),e("q-separator"),t._l(t.mesa.lineasPedido,(function(a){return e("q-item",{key:a.producto.nombre},[e("q-item-section",{staticClass:"col-2"},[t._v(t._s(a.cantidad))]),e("q-item-section",{staticClass:"col-6"},[t._v(t._s(a.producto.nombre))]),e("q-item-section",{staticClass:"col items-end"},[t._v(t._s(a.producto.precio)+" €")]),e("q-item-section",{staticClass:"col items-end"},[t._v(t._s(a.producto.precio*a.cantidad)+" €")])],1)})),e("q-separator"),e("q-item",[e("q-item-section",{staticClass:"flex items-end text-bold"},[e("q-item-label",[t._v("\n          Base imponible: "+t._s(t.baseImponible)+"€\n        ")]),t._l(t.iva,(function(a){return e("div",{key:a.nombre},[0!=a.acumulado?e("q-item-label",[t._v("\n            IVA "+t._s(a.nombre)+": "+t._s(a.acumulado)+"€\n          ")]):t._e()],1)})),e("q-item-label",{staticClass:"text-h6"},[t._v("\n          Total: "+t._s(t.total)+"€\n        ")])],2)],1)],2),e("q-btn",{staticClass:"full-width q-mt-sm",attrs:{color:"white","text-color":"black",label:"Cerrar mesa",padding:"md"},on:{click:function(a){return t.cerrarMesa()}}}),e("q-footer",{staticClass:"bg-secondary text-black",attrs:{elevated:""}},[e("q-tabs",{attrs:{align:"center"}},[e("q-route-tab",{attrs:{to:"/",icon:"home"}}),e("q-route-tab",{attrs:{to:{name:"mesa",params:{id:t.id.toString()}},label:"Volver a mesa"}})],1)],1)],1)},o=[],r=e("70f3"),i=(e("9a5b"),e("8203"),e("0f9e"),e("9254"),e("f5d1"),e("d2a5")),n={name:"Cuenta",props:{id:String},data(){return{mesa:null,rest:null,baseImponible:0,iva:[],total:0}},created(){this.mesa=i["a"].$restLocal.getMesas()[parseInt(this.id)-1],this.rest=i["a"].$restLocal,this.rest.impuestos.forEach(t=>{let a=Object();a.id=t.id,a.nombre=t.nombre,a.cantidad=t.cantidad,a.acumulado=0,this.iva.push(a)}),this.mesa.lineasPedido.forEach(t=>{this.baseImponible+=Math.round(t.producto.precio*t.cantidad*100)/100,this.iva.forEach(a=>{a.id===t.producto.iva.id&&(a.acumulado+=Math.round(t.producto.precio*t.producto.iva.cantidad/100*t.cantidad*100)/100)})}),this.iva.forEach(t=>{this.total+=t.acumulado}),this.total+=this.baseImponible,this.total=Math.round(100*this.total)/100},methods:{cerrarMesa(){this.rest.historico.push(this.mesa),this.rest.mesas[this.id-1]=null,r["a"].guardarEstadoLocalStorage(),this.$router.push({name:"index"})}}},c=n,d=e("2877"),l=e("9989"),u=e("1c1c"),m=e("66e5"),h=e("4074"),p=e("eb85"),g=e("0170"),I=e("9c40"),b=e("7ff0"),L=e("429b"),$=e("7867"),f=e("eebe"),C=e.n(f),w=Object(d["a"])(c,s,o,!1,null,null,null);a["default"]=w.exports;C()(w,"components",{QPage:l["a"],QList:u["a"],QItem:m["a"],QItemSection:h["a"],QSeparator:p["a"],QItemLabel:g["a"],QBtn:I["a"],QFooter:b["a"],QTabs:L["a"],QRouteTab:$["a"]})},"70f3":function(t,a,e){"use strict";var s=e("9a5b"),o=e("8203"),r=e("0f9e"),i=e("9254"),n=e("f5d1"),c=e("d2a5");class d{static guardarEstadoLocalStorage(){localStorage.setItem("restauranteLocal",JSON.stringify(c["a"].$restLocal))}static restaurarEstadoLocalStorage(){if(localStorage["restauranteLocal"]){let a=JSON.parse(localStorage.getItem("restauranteLocal"));function t(t,a,e){let d=new o["a"](c["a"].$restLocal.getIdMesa());null!==t&&(c["a"].$restLocal.aumentarIdMesa(),t.lineasPedido.forEach(t=>{let a=new r["a"](t.producto.iva.id,t.producto.iva.nombre,t.producto.iva.cantidad),e=new s["a"](t.producto.categoria.id,t.producto.categoria.nombre),o=new n["a"](t.producto.id,t.producto.nombre,e,t.producto.precio,a),c=new i["a"](parseInt(t.cantidad),o);null!=t.nota&&c.setNota(t.nota),d.anadirLinea(c)}),c["a"].$restLocal.anadirMesa(a,d))}return c["a"].$restLocal=new c["a"](a.nombre,a.mesas.length),a.categorias.forEach(t=>{let a=new s["a"](c["a"].$restLocal.getIdCategoria(),t.nombre);c["a"].$restLocal.anadirCategoria(a),c["a"].$restLocal.aumentarIdCategoria()}),a.impuestos.forEach(t=>{let a=new r["a"](c["a"].$restLocal.getIdImpuesto(),t.nombre,t.cantidad);c["a"].$restLocal.anadirImpuesto(a),c["a"].$restLocal.aumentarIdImpuesto()}),a.productos.forEach(t=>{let a=new n["a"](c["a"].$restLocal.getIdProducto(),t.nombre,t.categoria,t.precio,t.iva);c["a"].$restLocal.anadirProducto(a),c["a"].$restLocal.aumentarIdProducto()}),a.mesas.forEach(t),a.historico.forEach(t=>{let a=new o["a"](t.id);t.lineasPedido.forEach(t=>{let e=new r["a"](t.producto.iva.id,t.producto.iva.nombre,t.producto.iva.cantidad),o=new s["a"](t.producto.categoria.id,t.producto.categoria.nombre),c=new n["a"](t.producto.id,t.producto.nombre,o,t.producto.precio,e),d=new i["a"](parseInt(t.cantidad),c);a.anadirLinea(d)}),c["a"].$restLocal.anadirHistorico(a)}),!0}return!1}static calculaPrecioIva(t){let a=parseFloat(t.precio)*parseFloat(t.iva.cantidad)/100+parseFloat(t.precio);return Math.round(100*a)/100}static datosPrueba(){c["a"].$restLocal=new c["a"]("Casa Pepe",10);let t=new r["a"](c["a"].$restLocal.getIdImpuesto(),"reducido",10);c["a"].$restLocal.anadirImpuesto(t),c["a"].$restLocal.aumentarIdImpuesto();let a=new r["a"](c["a"].$restLocal.getIdImpuesto(),"normal",21);c["a"].$restLocal.anadirImpuesto(a),c["a"].$restLocal.aumentarIdImpuesto();let e=new r["a"](c["a"].$restLocal.getIdImpuesto(),"super",51);c["a"].$restLocal.anadirImpuesto(e),c["a"].$restLocal.aumentarIdImpuesto();let d=new s["a"](c["a"].$restLocal.getIdCategoria(),"refresco");c["a"].$restLocal.anadirCategoria(d),c["a"].$restLocal.aumentarIdCategoria();let l=new s["a"](c["a"].$restLocal.getIdCategoria(),"alcoholica");c["a"].$restLocal.anadirCategoria(l),c["a"].$restLocal.aumentarIdCategoria();let u=new n["a"](c["a"].$restLocal.getIdProducto(),"Coca-cola",d,1,t);c["a"].$restLocal.anadirProducto(u),c["a"].$restLocal.aumentarIdProducto();let m=new n["a"](c["a"].$restLocal.getIdProducto(),"fanta",d,1.2,t);c["a"].$restLocal.anadirProducto(m),c["a"].$restLocal.aumentarIdProducto();let h=new n["a"](c["a"].$restLocal.getIdProducto(),"Pepsi",d,.8,a);c["a"].$restLocal.anadirProducto(h),c["a"].$restLocal.aumentarIdProducto();let p=new n["a"](c["a"].$restLocal.getIdProducto(),"Vino",l,2,a);c["a"].$restLocal.anadirProducto(p),c["a"].$restLocal.aumentarIdProducto();let g=new o["a"](c["a"].$restLocal.getIdMesa());c["a"].$restLocal.aumentarIdMesa();let I=new i["a"](2,u);I.setNota("Sin hielos");let b=new i["a"](1,p),L=new i["a"](2,m);g.anadirLinea(I),g.anadirLinea(b),g.anadirLinea(L),c["a"].$restLocal.anadirMesa(0,g);let $=new o["a"](c["a"].$restLocal.getIdMesa());c["a"].$restLocal.aumentarIdMesa();let f=new i["a"](5,u),C=new i["a"](5,p),w=new i["a"](5,m);$.anadirLinea(f),$.anadirLinea(C),$.anadirLinea(w),c["a"].$restLocal.anadirMesa(1,$)}}a["a"]=d},8203:function(t,a,e){"use strict";class s{constructor(t){this.id=t,this.lineasPedido=new Array}getId(){return this.id}getLineasPedido(){return this.lineasPedido}anadirLinea(t){let a=!1;this.lineasPedido.forEach(e=>{e.getProducto().getId()===t.getProducto().getId()&&(e.setCantidad(parseInt(e.getCantidad())+parseInt(t.getCantidad())),a=!0)}),a||this.lineasPedido.push(t)}}a["a"]=s},9254:function(t,a,e){"use strict";class s{constructor(t,a){this.cantidad=t,this.producto=a,this.nota=null}getCantidad(){return this.cantidad}getProducto(){return this.producto}getNota(){return this.nota}setCantidad(t){this.cantidad=t}setProducto(t){this.producto=t}setNota(t){this.nota=t}}a["a"]=s},"9a5b":function(t,a,e){"use strict";class s{constructor(t,a){this.id=t,this.nombre=a}getId(){return this.id}getNombre(){return this.nombre}setNombre(t){this.nombre=t}}a["a"]=s},d2a5:function(t,a,e){"use strict";e("c975"),e("a434");class s{constructor(t,a){this.nombre=t,this.mesas=new Array(a);for(let e=0;e<this.mesas.length;e++)this.mesas[e]=null;this.idMesa=1,this.idProducto=1,this.idImpuesto=1,this.idCategoria=1,this.productos=new Array,this.impuestos=new Array,this.categorias=new Array,this.historico=new Array}getNombre(){return this.nombre}getMesas(){return this.mesas}getIdMesa(){return this.idMesa}getIdProducto(){return this.idProducto}getIdImpuesto(){return this.idImpuesto}getIdCategoria(){return this.idCategoria}getProductos(){return this.productos}getImpuestos(){return this.impuestos}getCategorias(){return this.categorias}getHistorico(){return this.historico}setNombre(t){this.nombre=t}aumentarIdMesa(){this.idMesa++}aumentarIdImpuesto(){this.idImpuesto++}aumentarIdCategoria(){this.idCategoria++}aumentarIdProducto(){this.idProducto++}setMesas(t){this.mesas=t}anadirMesa(t,a){this.mesas[t]=a}cerrarMesa(t){this.mesas[t]=null}anadirProducto(t){this.productos.push(t)}eliminarProducto(t){this.productos.splice(this.productos.indexOf(t),1)}anadirImpuesto(t){this.impuestos.push(t)}eliminarImpuesto(t){this.impuestos.splice(this.impuestos.indexOf(t),1)}anadirCategoria(t){this.categorias.push(t)}eliminarCategoria(t){this.categorias.splice(this.categorias.indexOf(t),1)}anadirHistorico(t){this.historico.push(t)}}a["a"]=s},f5d1:function(t,a,e){"use strict";class s{constructor(t,a,e,s,o){this.id=t,this.nombre=a,this.categoria=e,this.precio=s,this.iva=o}getId(){return this.id}getNombre(){return this.nombre}getCategoria(){return this.categoria}getPrecio(){return this.precio}getIva(){return this.iva}setNombre(t){this.nombre=t}setCategoria(t){this.categoria=t}setPrecio(t){this.precio=t}setIva(t){this.iva=t}}a["a"]=s}}]);