(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"0e62":function(a,t,o){"use strict";o.r(t);var e=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-page",{staticClass:"q-pa-md"},[o("h3",{staticClass:"text-h3 q-my-sm"},[a._v("Mesa "+a._s(a.id))]),o("q-list",{attrs:{dense:"",separator:""}},[o("q-item",{staticClass:"flex"},[o("q-item-section",{staticClass:"col-3 text-bold"},[a._v("Cantidad")]),o("q-item-section",{staticClass:"col-7 text-bold"},[a._v("Producto")]),o("q-item-section",{staticClass:"col-2 items-end text-bold"},[a._v("Precio")])],1),a._l(a.mesa.lineasPedido,(function(t){return o("q-item",{key:t.producto.nombre,attrs:{clickable:""},on:{click:function(o){return a.modificarProducto(t)}}},[o("q-item-section",{staticClass:"col-3"},[a._v(a._s(t.cantidad))]),o("q-item-section",{staticClass:"col-7"},[o("q-item-label",[a._v(a._s(t.producto.nombre))]),null!=t.nota?o("q-item-label",{attrs:{caption:""}},[a._v(a._s(t.nota))]):a._e()],1),o("q-item-section",{staticClass:"col-2 items-end"},[a._v(a._s(a.calculaPrecioIva(t.producto))+" €")])],1)}))],2),o("q-dialog",{attrs:{"full-width":""},model:{value:a.modifica,callback:function(t){a.modifica=t},expression:"modifica"}},[a.modifica?o("q-card",[o("q-card-section",{staticClass:"row items-center q-pb-none"},[o("div",{staticClass:"text-h6"},[a._v(a._s(a.productoModifica.producto.nombre))]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),o("q-card-section",[o("q-input",{attrs:{label:"Cantidad",mask:"#####","label-color":"accent"},model:{value:a.productoModifica.cantidad,callback:function(t){a.$set(a.productoModifica,"cantidad",t)},expression:"productoModifica.cantidad"}}),o("div",{staticClass:"row q-py-sm"},[o("q-btn",{staticClass:"col full-width",attrs:{icon:"remove"},on:{click:a.restaProducto}}),o("q-btn",{staticClass:"col full-width",attrs:{icon:"add"},on:{click:a.sumaProducto}})],1),o("q-input",{staticClass:"q-mt-md",attrs:{label:"Notas","label-color":"accent"},model:{value:a.productoModifica.nota,callback:function(t){a.$set(a.productoModifica,"nota",t)},expression:"productoModifica.nota"}}),o("q-separator"),o("q-btn",{staticClass:"col full-width q-mt-md",attrs:{label:"Guardar",color:"positive",icon:"save"},on:{click:a.actualizaProducto}}),o("q-btn",{staticClass:"col full-width q-mt-sm",attrs:{label:"Eliminar producto",color:"negative",icon:"delete"},on:{click:a.eliminaProducto}})],1)],1):a._e()],1),o("q-footer",{staticClass:"bg-secondary text-black",attrs:{elevated:""}},[o("q-tabs",{attrs:{align:"center"}},[o("q-route-tab",{attrs:{to:"/",icon:"home"}}),o("q-route-tab",{attrs:{to:{name:"addProducto",params:{id:a.id}},label:"Añadir producto"}}),0!=a.mesa.lineasPedido.length?o("q-route-tab",{attrs:{to:{name:"cuenta",params:{id:a.id}},label:"Cuenta"}}):a._e()],1)],1)],1)},s=[],r=(o("a434"),o("70f3")),i=(o("9a5b"),o("8203")),c=(o("0f9e"),o("9254")),d=(o("f5d1"),o("d2a5")),n={name:"PageMesa",props:{id:String},data(){return{mesa:null,rest:null,modifica:!1,productoModifica:null}},created(){if(null===d["a"].$restLocal.getMesas()[parseInt(this.id)-1]){let a=new i["a"](d["a"].$restLocal.getIdMesa());d["a"].$restLocal.aumentarIdMesa(),d["a"].$restLocal.anadirMesa(parseInt(this.id)-1,a)}this.mesa=d["a"].$restLocal.getMesas()[parseInt(this.id)-1],this.rest=d["a"].$restLocal},methods:{calculaPrecioIva(a){return r["a"].calculaPrecioIva(a)},modificarProducto(a){this.modifica=!0;let t=new c["a"](a.cantidad,a.producto);null!=a.nota&&(t.nota=a.nota),this.productoModifica=t,r["a"].guardarEstadoLocalStorage()},sumaProducto(){this.productoModifica.cantidad++,r["a"].guardarEstadoLocalStorage()},restaProducto(){this.productoModifica.cantidad>1&&this.productoModifica.cantidad--,r["a"].guardarEstadoLocalStorage()},actualizaProducto(){this.mesa.lineasPedido.forEach(a=>{a.producto.id===this.productoModifica.producto.id&&(a.cantidad=parseInt(this.productoModifica.cantidad),a.producto=this.productoModifica.producto,a.nota=this.productoModifica.nota,this.modifica=!1)}),r["a"].guardarEstadoLocalStorage()},eliminaProducto(){let a;for(let t=0;t<this.mesa.lineasPedido.length;t++)this.mesa.lineasPedido[t].producto.id===this.productoModifica.producto.id&&(a=t);this.mesa.lineasPedido.splice(a,1),this.modifica=!1,r["a"].guardarEstadoLocalStorage()}}},u=n,l=o("2877"),m=o("9989"),p=o("1c1c"),h=o("66e5"),g=o("4074"),I=o("0170"),f=o("24e8"),L=o("f09f"),b=o("a370"),P=o("2c91"),$=o("9c40"),w=o("27f9"),C=o("eb85"),M=o("7ff0"),v=o("429b"),q=o("7867"),_=o("7f67"),E=o("eebe"),S=o.n(E),N=Object(l["a"])(u,e,s,!1,null,null,null);t["default"]=N.exports;S()(N,"components",{QPage:m["a"],QList:p["a"],QItem:h["a"],QItemSection:g["a"],QItemLabel:I["a"],QDialog:f["a"],QCard:L["a"],QCardSection:b["a"],QSpace:P["a"],QBtn:$["a"],QInput:w["a"],QSeparator:C["a"],QFooter:M["a"],QTabs:v["a"],QRouteTab:q["a"]}),S()(N,"directives",{ClosePopup:_["a"]})},"0f9e":function(a,t,o){"use strict";class e{constructor(a,t,o){this.id=a,this.nombre=t,this.cantidad=o}getId(){return this.id}getNombre(){return this.nombre}getCantidad(){return this.cantidad}setNombre(a){this.nombre=a}setCantidad(a){this.cantidad=a}}t["a"]=e},"70f3":function(a,t,o){"use strict";var e=o("9a5b"),s=o("8203"),r=o("0f9e"),i=o("9254"),c=o("f5d1"),d=o("d2a5");class n{static guardarEstadoLocalStorage(){localStorage.setItem("restauranteLocal",JSON.stringify(d["a"].$restLocal))}static restaurarEstadoLocalStorage(){if(localStorage.restauranteLocal){const t=JSON.parse(localStorage.getItem("restauranteLocal"));function a(a,t,o){const n=new s["a"](d["a"].$restLocal.getIdMesa());null!==a&&(d["a"].$restLocal.aumentarIdMesa(),a.lineasPedido.forEach(a=>{const t=new r["a"](a.producto.iva.id,a.producto.iva.nombre,a.producto.iva.cantidad),o=new e["a"](a.producto.categoria.id,a.producto.categoria.nombre),s=new c["a"](a.producto.id,a.producto.nombre,o,a.producto.precio,t),d=new i["a"](parseInt(a.cantidad),s);null!=a.nota&&d.setNota(a.nota),n.anadirLinea(d)}),d["a"].$restLocal.anadirMesa(t,n))}return d["a"].$restLocal=new d["a"](t.nombre,t.mesas.length),t.categorias.forEach(a=>{const t=new e["a"](d["a"].$restLocal.getIdCategoria(),a.nombre);d["a"].$restLocal.anadirCategoria(t),d["a"].$restLocal.aumentarIdCategoria()}),t.impuestos.forEach(a=>{const t=new r["a"](d["a"].$restLocal.getIdImpuesto(),a.nombre,a.cantidad);d["a"].$restLocal.anadirImpuesto(t),d["a"].$restLocal.aumentarIdImpuesto()}),t.productos.forEach(a=>{const t=new c["a"](d["a"].$restLocal.getIdProducto(),a.nombre,a.categoria,a.precio,a.iva);d["a"].$restLocal.anadirProducto(t),d["a"].$restLocal.aumentarIdProducto()}),t.mesas.forEach(a),t.historico.forEach(a=>{const t=new s["a"](a.id);a.lineasPedido.forEach(a=>{const o=new r["a"](a.producto.iva.id,a.producto.iva.nombre,a.producto.iva.cantidad),s=new e["a"](a.producto.categoria.id,a.producto.categoria.nombre),d=new c["a"](a.producto.id,a.producto.nombre,s,a.producto.precio,o),n=new i["a"](parseInt(a.cantidad),d);t.anadirLinea(n)}),d["a"].$restLocal.anadirHistorico(t)}),!0}return!1}static calculaPrecioIva(a){const t=parseFloat(a.precio)*parseFloat(a.iva.cantidad)/100+parseFloat(a.precio);return Math.round(100*t)/100}static datosPrueba(){d["a"].$restLocal=new d["a"]("Casa Pepe",10);const a=new r["a"](d["a"].$restLocal.getIdImpuesto(),"reducido",10);d["a"].$restLocal.anadirImpuesto(a),d["a"].$restLocal.aumentarIdImpuesto();const t=new r["a"](d["a"].$restLocal.getIdImpuesto(),"normal",21);d["a"].$restLocal.anadirImpuesto(t),d["a"].$restLocal.aumentarIdImpuesto();const o=new r["a"](d["a"].$restLocal.getIdImpuesto(),"super",51);d["a"].$restLocal.anadirImpuesto(o),d["a"].$restLocal.aumentarIdImpuesto();const n=new e["a"](d["a"].$restLocal.getIdCategoria(),"refresco");d["a"].$restLocal.anadirCategoria(n),d["a"].$restLocal.aumentarIdCategoria();const u=new e["a"](d["a"].$restLocal.getIdCategoria(),"alcoholica");d["a"].$restLocal.anadirCategoria(u),d["a"].$restLocal.aumentarIdCategoria();const l=new c["a"](d["a"].$restLocal.getIdProducto(),"Coca-cola",n,1,a);d["a"].$restLocal.anadirProducto(l),d["a"].$restLocal.aumentarIdProducto();const m=new c["a"](d["a"].$restLocal.getIdProducto(),"fanta",n,1.2,a);d["a"].$restLocal.anadirProducto(m),d["a"].$restLocal.aumentarIdProducto();const p=new c["a"](d["a"].$restLocal.getIdProducto(),"Pepsi",n,.8,t);d["a"].$restLocal.anadirProducto(p),d["a"].$restLocal.aumentarIdProducto();const h=new c["a"](d["a"].$restLocal.getIdProducto(),"Vino",u,2,t);d["a"].$restLocal.anadirProducto(h),d["a"].$restLocal.aumentarIdProducto();const g=new s["a"](d["a"].$restLocal.getIdMesa());d["a"].$restLocal.aumentarIdMesa();const I=new i["a"](2,l);I.setNota("Sin hielos");const f=new i["a"](1,h),L=new i["a"](2,m);g.anadirLinea(I),g.anadirLinea(f),g.anadirLinea(L),d["a"].$restLocal.anadirMesa(0,g);const b=new s["a"](d["a"].$restLocal.getIdMesa());d["a"].$restLocal.aumentarIdMesa();const P=new i["a"](5,l),$=new i["a"](5,h),w=new i["a"](5,m);b.anadirLinea(P),b.anadirLinea($),b.anadirLinea(w),d["a"].$restLocal.anadirMesa(1,b)}}t["a"]=n},8203:function(a,t,o){"use strict";class e{constructor(a){this.id=a,this.lineasPedido=new Array}getId(){return this.id}getLineasPedido(){return this.lineasPedido}anadirLinea(a){let t=!1;this.lineasPedido.forEach(o=>{o.getProducto().getId()===a.getProducto().getId()&&(o.setCantidad(parseInt(o.getCantidad())+parseInt(a.getCantidad())),t=!0)}),t||this.lineasPedido.push(a)}}t["a"]=e},9254:function(a,t,o){"use strict";class e{constructor(a,t){this.cantidad=a,this.producto=t,this.nota=null}getCantidad(){return this.cantidad}getProducto(){return this.producto}getNota(){return this.nota}setCantidad(a){this.cantidad=a}setProducto(a){this.producto=a}setNota(a){this.nota=a}}t["a"]=e},"9a5b":function(a,t,o){"use strict";class e{constructor(a,t){this.id=a,this.nombre=t}getId(){return this.id}getNombre(){return this.nombre}setNombre(a){this.nombre=a}}t["a"]=e},d2a5:function(a,t,o){"use strict";o("c975"),o("a434");class e{constructor(a,t){this.nombre=a,this.mesas=new Array(t);for(let o=0;o<this.mesas.length;o++)this.mesas[o]=null;this.idMesa=1,this.idProducto=1,this.idImpuesto=1,this.idCategoria=1,this.productos=new Array,this.impuestos=new Array,this.categorias=new Array,this.historico=new Array}getNombre(){return this.nombre}getMesas(){return this.mesas}getIdMesa(){return this.idMesa}getIdProducto(){return this.idProducto}getIdImpuesto(){return this.idImpuesto}getIdCategoria(){return this.idCategoria}getProductos(){return this.productos}getImpuestos(){return this.impuestos}getCategorias(){return this.categorias}getHistorico(){return this.historico}setNombre(a){this.nombre=a}aumentarIdMesa(){this.idMesa++}aumentarIdImpuesto(){this.idImpuesto++}aumentarIdCategoria(){this.idCategoria++}aumentarIdProducto(){this.idProducto++}setMesas(a){this.mesas=a}anadirMesa(a,t){this.mesas[a]=t}cerrarMesa(a){this.mesas[a]=null}anadirProducto(a){this.productos.push(a)}eliminarProducto(a){this.productos.splice(this.productos.indexOf(a),1)}anadirImpuesto(a){this.impuestos.push(a)}eliminarImpuesto(a){this.impuestos.splice(this.impuestos.indexOf(a),1)}anadirCategoria(a){this.categorias.push(a)}eliminarCategoria(a){this.categorias.splice(this.categorias.indexOf(a),1)}anadirHistorico(a){this.historico.push(a)}}t["a"]=e},f5d1:function(a,t,o){"use strict";class e{constructor(a,t,o,e,s){this.id=a,this.nombre=t,this.categoria=o,this.precio=e,this.iva=s}getId(){return this.id}getNombre(){return this.nombre}getCategoria(){return this.categoria}getPrecio(){return this.precio}getIva(){return this.iva}setNombre(a){this.nombre=a}setCategoria(a){this.categoria=a}setPrecio(a){this.precio=a}setIva(a){this.iva=a}}t["a"]=e}}]);