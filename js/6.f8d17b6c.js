(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"0f9e":function(t,a,o){"use strict";class e{constructor(t,a,o){this.id=t,this.nombre=a,this.cantidad=o}getId(){return this.id}getNombre(){return this.nombre}getCantidad(){return this.cantidad}setNombre(t){this.nombre=t}setCantidad(t){this.cantidad=t}}a["a"]=e},"70f3":function(t,a,o){"use strict";var e=o("9a5b"),i=o("8203"),r=o("0f9e"),s=o("9254"),c=o("f5d1"),d=o("d2a5");class n{static guardarEstadoLocalStorage(){localStorage.setItem("restauranteLocal",JSON.stringify(d["a"].$restLocal))}static restaurarEstadoLocalStorage(){if(localStorage.restauranteLocal){const a=JSON.parse(localStorage.getItem("restauranteLocal"));function t(t,a,o){const n=new i["a"](d["a"].$restLocal.getIdMesa());null!==t&&(d["a"].$restLocal.aumentarIdMesa(),t.lineasPedido.forEach(t=>{const a=new r["a"](t.producto.iva.id,t.producto.iva.nombre,t.producto.iva.cantidad),o=new e["a"](t.producto.categoria.id,t.producto.categoria.nombre),i=new c["a"](t.producto.id,t.producto.nombre,o,t.producto.precio,a),d=new s["a"](parseInt(t.cantidad),i);null!=t.nota&&d.setNota(t.nota),n.anadirLinea(d)}),d["a"].$restLocal.anadirMesa(a,n))}return d["a"].$restLocal=new d["a"](a.nombre,a.mesas.length),a.categorias.forEach(t=>{const a=new e["a"](d["a"].$restLocal.getIdCategoria(),t.nombre);d["a"].$restLocal.anadirCategoria(a),d["a"].$restLocal.aumentarIdCategoria()}),a.impuestos.forEach(t=>{const a=new r["a"](d["a"].$restLocal.getIdImpuesto(),t.nombre,t.cantidad);d["a"].$restLocal.anadirImpuesto(a),d["a"].$restLocal.aumentarIdImpuesto()}),a.productos.forEach(t=>{const a=new c["a"](d["a"].$restLocal.getIdProducto(),t.nombre,t.categoria,t.precio,t.iva);d["a"].$restLocal.anadirProducto(a),d["a"].$restLocal.aumentarIdProducto()}),a.mesas.forEach(t),a.historico.forEach(t=>{const a=new i["a"](t.id);t.lineasPedido.forEach(t=>{const o=new r["a"](t.producto.iva.id,t.producto.iva.nombre,t.producto.iva.cantidad),i=new e["a"](t.producto.categoria.id,t.producto.categoria.nombre),d=new c["a"](t.producto.id,t.producto.nombre,i,t.producto.precio,o),n=new s["a"](parseInt(t.cantidad),d);a.anadirLinea(n)}),d["a"].$restLocal.anadirHistorico(a)}),!0}return!1}static calculaPrecioIva(t){const a=parseFloat(t.precio)*parseFloat(t.iva.cantidad)/100+parseFloat(t.precio);return Math.round(100*a)/100}static datosPrueba(){d["a"].$restLocal=new d["a"]("Casa Pepe",10);const t=new r["a"](d["a"].$restLocal.getIdImpuesto(),"reducido",10);d["a"].$restLocal.anadirImpuesto(t),d["a"].$restLocal.aumentarIdImpuesto();const a=new r["a"](d["a"].$restLocal.getIdImpuesto(),"normal",21);d["a"].$restLocal.anadirImpuesto(a),d["a"].$restLocal.aumentarIdImpuesto();const o=new r["a"](d["a"].$restLocal.getIdImpuesto(),"super",51);d["a"].$restLocal.anadirImpuesto(o),d["a"].$restLocal.aumentarIdImpuesto();const n=new e["a"](d["a"].$restLocal.getIdCategoria(),"refresco");d["a"].$restLocal.anadirCategoria(n),d["a"].$restLocal.aumentarIdCategoria();const u=new e["a"](d["a"].$restLocal.getIdCategoria(),"alcoholica");d["a"].$restLocal.anadirCategoria(u),d["a"].$restLocal.aumentarIdCategoria();const l=new c["a"](d["a"].$restLocal.getIdProducto(),"Coca-cola",n,1,t);d["a"].$restLocal.anadirProducto(l),d["a"].$restLocal.aumentarIdProducto();const p=new c["a"](d["a"].$restLocal.getIdProducto(),"fanta",n,1.2,t);d["a"].$restLocal.anadirProducto(p),d["a"].$restLocal.aumentarIdProducto();const h=new c["a"](d["a"].$restLocal.getIdProducto(),"Pepsi",n,.8,a);d["a"].$restLocal.anadirProducto(h),d["a"].$restLocal.aumentarIdProducto();const m=new c["a"](d["a"].$restLocal.getIdProducto(),"Vino",u,2,a);d["a"].$restLocal.anadirProducto(m),d["a"].$restLocal.aumentarIdProducto();const g=new i["a"](d["a"].$restLocal.getIdMesa());d["a"].$restLocal.aumentarIdMesa();const f=new s["a"](2,l);f.setNota("Sin hielos");const b=new s["a"](1,m),I=new s["a"](2,p);g.anadirLinea(f),g.anadirLinea(b),g.anadirLinea(I),d["a"].$restLocal.anadirMesa(0,g);const L=new i["a"](d["a"].$restLocal.getIdMesa());d["a"].$restLocal.aumentarIdMesa();const P=new s["a"](5,l),v=new s["a"](5,m),$=new s["a"](5,p);L.anadirLinea(P),L.anadirLinea(v),L.anadirLinea($),d["a"].$restLocal.anadirMesa(1,L)}}a["a"]=n},8203:function(t,a,o){"use strict";class e{constructor(t){this.id=t,this.lineasPedido=new Array}getId(){return this.id}getLineasPedido(){return this.lineasPedido}anadirLinea(t){let a=!1;this.lineasPedido.forEach(o=>{o.getProducto().getId()===t.getProducto().getId()&&(o.setCantidad(parseInt(o.getCantidad())+parseInt(t.getCantidad())),a=!0)}),a||this.lineasPedido.push(t)}}a["a"]=e},8836:function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("q-page",{staticClass:"q-pa-md"},[o("h5",{staticClass:"text-h5 q-my-sm"},[t._v("Configuración productos")]),o("q-list",{attrs:{dense:"",separator:""}},t._l(t.rest.categorias,(function(a){return o("div",{key:a.id},[o("q-separator",{staticClass:"q-mt-md"}),o("q-item-label",{staticClass:"text-h5",attrs:{header:""}},[t._v(t._s(a.nombre))]),o("q-item",[o("q-item-section",{staticClass:"col text-bold"},[t._v("Nombre")]),o("q-item-section",{staticClass:"col-2 text-bold"},[t._v("Precio")]),o("q-item-section",{staticClass:"col text-bold"},[t._v("Impuesto")])],1),t._l(t.rest.productos,(function(e){return o("div",{key:e.id,on:{click:function(a){return t.modificarProducto(e)}}},[a.id==e.categoria.id?o("q-item",{attrs:{dense:"",clickable:""}},[o("q-item-section",{staticClass:"col"},[t._v(t._s(e.nombre))]),o("q-item-section",{staticClass:"col-2"},[t._v(t._s(e.precio)+"€")]),o("q-item-section",{staticClass:"col"},[t._v(t._s(e.iva.nombre)+" ("+t._s(e.iva.cantidad)+"%)")])],1):t._e()],1)}))],2)})),0),o("q-btn",{staticClass:"full-width q-mt-md",attrs:{label:"Añadir producto"},on:{click:t.anadirProducto}}),o("q-dialog",{attrs:{"full-width":""},model:{value:t.modifica,callback:function(a){t.modifica=a},expression:"modifica"}},[t.modifica?o("q-card",[o("q-card-section",{staticClass:"row items-center q-pb-none"},[t.productoModifica.id!=t.rest.idProducto?o("div",{staticClass:"text-h6"},[t._v("Modificar producto")]):o("div",{staticClass:"text-h6"},[t._v("Añadir producto")]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),o("q-card-section",[o("q-input",{staticClass:"q-mt-md",attrs:{label:"Nombre","label-color":"accent"},model:{value:t.productoModifica.nombre,callback:function(a){t.$set(t.productoModifica,"nombre",a)},expression:"productoModifica.nombre"}}),o("q-input",{attrs:{label:"Precio",rules:[function(t){return!isNaN(t)||"Introduce un precio válido"}],"label-color":"accent"},model:{value:t.productoModifica.precio,callback:function(a){t.$set(t.productoModifica,"precio",a)},expression:"productoModifica.precio"}}),o("q-select",{attrs:{label:"Categoria",options:t.optionsCategoria,"option-label":"nombre","label-color":"accent"},model:{value:t.productoModifica.categoria,callback:function(a){t.$set(t.productoModifica,"categoria",a)},expression:"productoModifica.categoria"}}),o("q-select",{attrs:{label:"Impuesto",options:t.optionsImpuesto,"option-label":"nombre","label-color":"accent"},model:{value:t.productoModifica.iva,callback:function(a){t.$set(t.productoModifica,"iva",a)},expression:"productoModifica.iva"}}),o("q-btn",{staticClass:"full-width q-mt-md",attrs:{label:"Guardar",color:"positive",icon:"save"},on:{click:t.guardarProducto}}),t.productoModifica.id!=t.rest.idProducto?o("q-btn",{staticClass:"col full-width q-mt-xs",attrs:{label:"Eliminar",color:"negative",icon:"delete"},on:{click:t.eliminarProducto}}):t._e()],1)],1):t._e()],1),o("q-footer",{staticClass:"bg-secondary text-black",attrs:{elevated:""}},[o("q-tabs",{attrs:{align:"center"}},[o("q-route-tab",{attrs:{to:"/configuracion",label:"Volver"}})],1)],1)],1)},i=[],r=(o("a434"),o("70f3")),s=(o("9a5b"),o("8203"),o("0f9e"),o("9254"),o("f5d1")),c=o("d2a5"),d={name:"ConfiguraProductos",props:{},data(){return{rest:null,modifica:!1,productoModifica:null,optionsImpuesto:[],optionsCategoria:[]}},created(){this.rest=c["a"].$restLocal,this.rest.impuestos.forEach(t=>{this.optionsImpuesto.push(t)}),this.rest.categorias.forEach(t=>{this.optionsCategoria.push(t)})},methods:{modificarProducto(t){this.modifica=!0,this.productoModifica=new s["a"](t.id,t.nombre,t.categoria,t.precio,t.iva)},guardarProducto(){if(isNaN(this.productoModifica.precio))this.$q.notify({type:"negative",message:"Precio inválido"});else if(""==this.productoModifica.nombre||""==this.productoModifica.categoria||""==this.productoModifica.iva||""==this.productoModifica.precio)this.$q.notify({type:"negative",message:"No pueden haber campos en blanco"});else if(this.rest.idProducto!=this.productoModifica.id)this.rest.productos.forEach(t=>{t.id===this.productoModifica.id&&(t.nombre=this.productoModifica.nombre,t.categoria=this.productoModifica.categoria,t.precio=Math.round(100*this.productoModifica.precio)/100,t.iva=this.productoModifica.iva)}),this.modifica=!1;else{let t=new s["a"](this.productoModifica.id,this.productoModifica.nombre,this.productoModifica.categoria,this.productoModifica.precio,this.productoModifica.iva);this.rest.idProducto++,this.rest.productos.push(t),this.modifica=!1}r["a"].guardarEstadoLocalStorage()},eliminarProducto(){let t,a=!1;if(this.rest.mesas.forEach(o=>{null!==o&&o.lineasPedido.forEach(e=>{e.producto.id===this.productoModifica.id&&(t=o.id,a=!0)})}),a)this.$q.notify({type:"negative",message:"No se puede eliminar el producto porque hay mesas quelo tienen asignado. Quita el producto a esas mesas. Ej. "+t});else{let t;for(let a=0;a<this.rest.productos.length;a++)this.rest.productos[a].id===this.productoModifica.id&&(t=a);this.rest.productos.splice(t,1),this.modifica=!1}r["a"].guardarEstadoLocalStorage()},anadirProducto(){this.modifica=!0,this.productoModifica=new s["a"](this.rest.idProducto,"","","","")}}},n=d,u=o("2877"),l=o("9989"),p=o("1c1c"),h=o("eb85"),m=o("0170"),g=o("66e5"),f=o("4074"),b=o("9c40"),I=o("24e8"),L=o("f09f"),P=o("a370"),v=o("2c91"),$=o("27f9"),M=o("ddd8"),C=o("7ff0"),w=o("429b"),q=o("7867"),N=o("7f67"),_=o("eebe"),E=o.n(_),x=Object(u["a"])(n,e,i,!1,null,null,null);a["default"]=x.exports;E()(x,"components",{QPage:l["a"],QList:p["a"],QSeparator:h["a"],QItemLabel:m["a"],QItem:g["a"],QItemSection:f["a"],QBtn:b["a"],QDialog:I["a"],QCard:L["a"],QCardSection:P["a"],QSpace:v["a"],QInput:$["a"],QSelect:M["a"],QFooter:C["a"],QTabs:w["a"],QRouteTab:q["a"]}),E()(x,"directives",{ClosePopup:N["a"]})},9254:function(t,a,o){"use strict";class e{constructor(t,a){this.cantidad=t,this.producto=a,this.nota=null}getCantidad(){return this.cantidad}getProducto(){return this.producto}getNota(){return this.nota}setCantidad(t){this.cantidad=t}setProducto(t){this.producto=t}setNota(t){this.nota=t}}a["a"]=e},"9a5b":function(t,a,o){"use strict";class e{constructor(t,a){this.id=t,this.nombre=a}getId(){return this.id}getNombre(){return this.nombre}setNombre(t){this.nombre=t}}a["a"]=e},d2a5:function(t,a,o){"use strict";o("c975"),o("a434");class e{constructor(t,a){this.nombre=t,this.mesas=new Array(a);for(let o=0;o<this.mesas.length;o++)this.mesas[o]=null;this.idMesa=1,this.idProducto=1,this.idImpuesto=1,this.idCategoria=1,this.productos=new Array,this.impuestos=new Array,this.categorias=new Array,this.historico=new Array}getNombre(){return this.nombre}getMesas(){return this.mesas}getIdMesa(){return this.idMesa}getIdProducto(){return this.idProducto}getIdImpuesto(){return this.idImpuesto}getIdCategoria(){return this.idCategoria}getProductos(){return this.productos}getImpuestos(){return this.impuestos}getCategorias(){return this.categorias}getHistorico(){return this.historico}setNombre(t){this.nombre=t}aumentarIdMesa(){this.idMesa++}aumentarIdImpuesto(){this.idImpuesto++}aumentarIdCategoria(){this.idCategoria++}aumentarIdProducto(){this.idProducto++}setMesas(t){this.mesas=t}anadirMesa(t,a){this.mesas[t]=a}cerrarMesa(t){this.mesas[t]=null}anadirProducto(t){this.productos.push(t)}eliminarProducto(t){this.productos.splice(this.productos.indexOf(t),1)}anadirImpuesto(t){this.impuestos.push(t)}eliminarImpuesto(t){this.impuestos.splice(this.impuestos.indexOf(t),1)}anadirCategoria(t){this.categorias.push(t)}eliminarCategoria(t){this.categorias.splice(this.categorias.indexOf(t),1)}anadirHistorico(t){this.historico.push(t)}}a["a"]=e},f5d1:function(t,a,o){"use strict";class e{constructor(t,a,o,e,i){this.id=t,this.nombre=a,this.categoria=o,this.precio=e,this.iva=i}getId(){return this.id}getNombre(){return this.nombre}getCategoria(){return this.categoria}getPrecio(){return this.precio}getIva(){return this.iva}setNombre(t){this.nombre=t}setCategoria(t){this.categoria=t}setPrecio(t){this.precio=t}setIva(t){this.iva=t}}a["a"]=e}}]);